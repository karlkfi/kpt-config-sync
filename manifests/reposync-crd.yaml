# Custom Resource Definition for a RepoSync.
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.2.5
  labels:
    configmanagement.gke.io/system: "true"
    configmanagement.gke.io/arch: "csmr"
  name: reposyncs.configsync.gke.io
spec:
  group: configsync.gke.io
  names:
    kind: RepoSync
    listKind: RepoSyncList
    plural: reposyncs
    singular: reposync
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - jsonPath: .status.source.commit
      name: SourceCommit
      type: string
    - jsonPath: .status.sync.commit
      name: SyncCommit
      type: string
    name: v1alpha1
    served: true
    storage: false
    schema:
      openAPIV3Schema:
        description: RepoSync is the Schema for the reposyncs API
        type: object
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
                     of an object. Servers should convert recognized schemas to the latest
                     internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
                     object represents. Servers may infer this from the endpoint the client
                     submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: RepoSyncSpec defines the desired state of a RepoSync.
            type: object
            properties:
              git:
                description: git contains configuration specific to importing policies
                  from a Git repo.
                required:
                - auth
                - repo
                type: object
                properties:
                  auth:
                    description: auth is the type of secret configured for access to
                      the Git repo. Must be one of ssh, cookiefile, gcenode, token,
                      or none. Required. The validation of this is case-sensitive. Required.
                    pattern: ^(ssh|cookiefile|gcenode|gcpserviceaccount|token|none)$
                    type: string
                  branch:
                    description: 'branch is the git branch to checkout. Default: "master".'
                    type: string
                  dir:
                    description: 'dir is the absolute path of the directory that contains
                             the local config.  Default: the root directory of the repo.'
                    type: string
                  gcpServiceAccountEmail:
                    description: 'gcpServiceAccountEmail specifies the GCP service account
                             used to annotate the RepoSync controller Kubernetes Service
                             Account. Note: The field is used when spec.git.auth: gcpserviceaccount.'
                    type: string
                  period:
                    description: 'period is the time duration in seconds between consecutive
                             syncs.  Default: 15 seconds. Note to developers that customers
                             specify this value using string (https://golang.org/pkg/time/#Duration.String)
                             like "3s" in their Custom Resource YAML. However, time.Duration
                             is at a nanosecond granularity, and it''s easy to introduce a
                             bug where it looks like the code is dealing with seconds but its
                             actually nanoseconds (or vice versa).'
                    type: string
                  proxy:
                    description: proxy is a struct that contains options for configuring
                      access to the Git repo via a proxy. Only has an effect when secretType
                      is one of ("cookiefile", "none"). Optional.
                    type: string
                  repo:
                    description: repo is the git repository URL to sync from. Required.
                    type: string
                  revision:
                    description: 'revision is the git revision (tag, ref or commit)
                             to fetch. Default: "HEAD".'
                    type: string
                  secretRef:
                    description: secretRef is the secret used to connect to the Git
                      source of truth.
                    properties:
                      name:
                        description: name represents the secret name.
                        type: string
                    type: object
              sourceFormat:
                description: "sourceFormat specifies how the repository is formatted.
                         See documentation for specifics of what these options do. \n Must
                         be unstructured. Optional. Set to unstructured if not specified. \n
                         The validation of this is case-sensitive."
                pattern: ^(unstructured|)$
                type: string
          status:
            description: RepoSyncStatus defines the observed state of a RepoSync.
            type: object
            x-kubernetes-preserve-unknown-fields: true
    subresources:
      status: {}
  - additionalPrinterColumns:
    - jsonPath: .status.source.commit
      name: SourceCommit
      type: string
    - jsonPath: .status.sync.commit
      name: SyncCommit
      type: string
    name: v1beta1
    served: true
    storage: true
    schema:
      openAPIV3Schema:
        description: RepoSync is the Schema for the reposyncs API
        type: object
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
                     of an object. Servers should convert recognized schemas to the latest
                     internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
                     object represents. Servers may infer this from the endpoint the client
                     submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: RepoSyncSpec defines the desired state of a RepoSync.
            type: object
            properties:
              git:
                description: git contains configuration specific to importing policies
                  from a Git repo.
                required:
                - auth
                - repo
                type: object
                properties:
                  auth:
                    description: auth is the type of secret configured for access to
                      the Git repo. Must be one of ssh, cookiefile, gcenode, token,
                      or none. Required. The validation of this is case-sensitive. Required.
                    pattern: ^(ssh|cookiefile|gcenode|gcpserviceaccount|token|none)$
                    type: string
                  branch:
                    description: 'branch is the git branch to checkout. Default: "master".'
                    type: string
                  dir:
                    description: 'dir is the absolute path of the directory that contains
                             the local config.  Default: the root directory of the repo.'
                    type: string
                  gcpServiceAccountEmail:
                    description: 'gcpServiceAccountEmail specifies the GCP service account
                             used to annotate the RepoSync controller Kubernetes Service
                             Account. Note: The field is used when spec.git.auth: gcpserviceaccount.'
                    type: string
                  period:
                    description: 'period is the time duration in seconds between consecutive
                             syncs.  Default: 15 seconds. Note to developers that customers
                             specify this value using string (https://golang.org/pkg/time/#Duration.String)
                             like "3s" in their Custom Resource YAML. However, time.Duration
                             is at a nanosecond granularity, and it''s easy to introduce a
                             bug where it looks like the code is dealing with seconds but its
                             actually nanoseconds (or vice versa).'
                    type: string
                  proxy:
                    description: proxy is a struct that contains options for configuring
                      access to the Git repo via a proxy. Only has an effect when secretType
                      is one of ("cookiefile", "none"). Optional.
                    type: string
                  repo:
                    description: repo is the git repository URL to sync from. Required.
                    type: string
                  revision:
                    description: 'revision is the git revision (tag, ref or commit)
                             to fetch. Default: "HEAD".'
                    type: string
                  secretRef:
                    description: secretRef is the secret used to connect to the Git
                      source of truth.
                    properties:
                      name:
                        description: name represents the secret name.
                        type: string
                    type: object
              sourceFormat:
                description: "sourceFormat specifies how the repository is formatted.
                         See documentation for specifics of what these options do. \n Must
                         be unstructured. Optional. Set to unstructured if not specified. \n
                         The validation of this is case-sensitive."
                pattern: ^(unstructured|)$
                type: string
          status:
            description: RepoSyncStatus defines the observed state of a RepoSync.
            type: object
            x-kubernetes-preserve-unknown-fields: true
    subresources:
      status: {}